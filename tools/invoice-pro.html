<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice Pro ‚Äî KharchaSaathi</title>

<style>
body{font-family: Arial, sans-serif; background:#fafafa; margin:0; padding:20px; text-align:center;}
body.dark{background:#121212; color:#e8e8e8;}
button.theme-toggle{position:fixed; top:12px; right:12px; padding:8px 12px; background:#ff8800; color:#fff; border:none; border-radius:6px;}

.container{max-width:780px; margin:auto;}
.card{background:#fff; border:1px solid #ccc; border-radius:10px; padding:18px; margin-top:15px;}
body.dark .card{background:#1e1e1e; border-color:#555;}

input{padding:8px; border-radius:6px; border:1px solid #888; width:100%; margin:4px 0;}
body.dark input{background:#222; border-color:#555; color:#eee;}

table{width:100%; border-collapse:collapse; margin-top:12px;}
th,td{border:1px solid #bbb; padding:8px; text-align:center;}
body.dark th, body.dark td{border-color:#666;}

.btn{background:#ff7a00; color:white; border:none; padding:10px 16px; border-radius:8px; margin-top:10px; cursor:pointer; font-weight:600;}
.btn:hover{background:#cc6300; transform:translateY(-2px);}
.btn-red{background:#d33;}
.btn-red:hover{background:#b22;}
</style>
</head>

<body>

<button class="theme-toggle" onclick="toggleTheme()">üåô</button>

<div class="container">
<h1>üßæ Invoice Pro (Item Wise Billing)</h1>

<div class="card">
<label>Shop Name (optional)</label><input id="shop">
<label>Address (optional)</label><input id="address">
<label>GST Number (optional)</label><input id="gstin">
</div>

<div class="card">
<h3>Add Items</h3>
<div style="display:flex; gap:8px; flex-wrap:wrap;">
<input id="itemName" placeholder="Item Name" style="flex:2;">
<input id="price" placeholder="Price (with GST)" type="number" style="flex:1;">
<input id="gst" placeholder="GST %" type="number" style="flex:1;">
<button class="btn" onclick="addItem()">Add</button>
</div>

<table id="billTbl">
<thead><tr><th>Item</th><th>Base</th><th>GST</th><th>Total</th><th></th></tr></thead>
<tbody></tbody>
</table>

<h3 style="margin-top:10px;">Net Payable: ‚Çπ <span id="netTotal">0.00</span></h3>
<button class="btn" onclick="printBill()">üñ®Ô∏è Print / Save PDF</button>
<button class="btn" onclick="shareBill()">üì≤ Share via WhatsApp</button>
</div>
</div>

<script>
function addItem(){
 let name=document.getElementById("itemName").value;
 let total=parseFloat(document.getElementById("price").value);
 let gst=parseFloat(document.getElementById("gst").value);

 if(!name||!total||!gst){alert("Enter item, price, gst"); return;}

 let base = total/(1+gst/100);
 let gstAmt = total-base;

 let row = `<tr>
   <td>${name}</td>
   <td>‚Çπ ${base.toFixed(2)}</td>
   <td>‚Çπ ${gstAmt.toFixed(2)} (${gst}%)</td>
   <td>‚Çπ ${total.toFixed(2)}</td>
   <td><button class="btn-red" onclick="this.parentNode.parentNode.remove(); updateTotal();">X</button></td>
 </tr>`;

 document.querySelector("#billTbl tbody").insertAdjacentHTML("beforeend",row);
 updateTotal();
}

function updateTotal(){
 let total=0;
 document.querySelectorAll("#billTbl tbody tr").forEach(r=>{
  total += parseFloat(r.children[3].innerText.replace("‚Çπ",""));
 });
 document.getElementById("netTotal").innerText = total.toFixed(2);
}

function printBill(){
 let shop=document.getElementById("shop").value||"SHOP NAME";
 let addr=document.getElementById("address").value||"";
 let gstin=document.getElementById("gstin").value?"GSTIN: "+document.getElementById("gstin").value:"";
 let win=window.open("","_blank");
 win.document.write(`<pre style="font-family:monospace;">${shop}\n${addr}\n${gstin}\n\n${document.getElementById("billTbl").outerHTML}\n\nTotal: ‚Çπ ${document.getElementById("netTotal").innerText}</pre>`);
 win.print();
}

function shareBill(){
 let text = `Invoice:\nTotal: ‚Çπ ${document.getElementById("netTotal").innerText}`;
 window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
}

(function(){const t=localStorage.getItem('ks-theme');if(t==='dark'){document.body.classList.add('dark');document.querySelector('.theme-toggle').textContent='‚òÄÔ∏è';}})();
function toggleTheme(){const d=document.body.classList.toggle('dark');localStorage.setItem('ks-theme',d?'dark':'light');document.querySelector('.theme-toggle').textContent=d?'‚òÄÔ∏è':'üåô';}
</script>

</body>
</html>
